
# docker-compose.preview.yml  (repo-rootì— ìœ„ì¹˜)
services:
  fe-preview:
    image: fe-preview:${PREVIEW_TAG}
    build:
      # ğŸ‘‰  ë¹Œë“œ ì»¨í…ìŠ¤íŠ¸ë¥¼ ëŸ°íƒ€ì„ ë³€ìˆ˜ë¡œ ì¹˜í™˜
      context: ./FE/${FE_APP}
      dockerfile: Dockerfile
    environment:
      # FEê°€ dev BEë¥¼ ë°”ë¼ë³´ë„ë¡ - í˜„ì¬ëŠ” ì£¼ì„
      #VITE_API_URL: http://{SPRING_CONTAINER_NAME}
    labels:
      # Traefik ì˜ˆì‹œ â€“ ë„ë©”ì¸ë„ ë³€ìˆ˜í™”
      - traefik.enable=true
      - traefik.http.routers.fe-${PREVIEW_TAG}.rule=Host(`${PREVIEW_DOMAIN}`)
      - traefik.http.services.fe-${PREVIEW_TAG}.loadbalancer.server.port=5173

networks:
  app-network:
    external: true
